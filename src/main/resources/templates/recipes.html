<!DOCTYPE html>
<html lang="fr" xmlns:th="https://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>Recettes - Dyson Sphere Project Calculator</title>
	<link th:href="@{css/dsp-calculator.min.css}" rel="stylesheet">
	<link th:href="@{js/DataTables/datatables.min.css}" rel="stylesheet">
	<script th:src="@{js/DataTables/datatables.min.js}"></script>
	<script th:src="@{js/util.min.js}"></script>
</head>
<body>
	<div class="content">
		<div>
			<h1 class="mb-5 text-3xl font-extrabold">Recettes</h1>
			<p>Vous vous trouvez sur la page de visualisation des recettes de <a class="app-name" th:href="@{/}"><th:block th:text="${appName}">??</th:block></a>, l'application de visualisation des données de Dyson Sphere Program.</p>
			<p>Il y a actuellement <th:block th:text="${nbRecipes}">??</th:block> recettes.</p>
			<!-- TODO: Légers problèmes d'affichage (largeur) à corriger -->
			<table id="dt_table" class="display w-full overview-table">
				<thead>
					<tr>
						<th class="text-nowrap">Nom</th>
						<th class="text-nowrap">Type</th>
						<th class="text-nowrap">Éléments produits</th>
						<th class="text-wrap">Ingrédients</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="r : ${recipes}">
						<td class="text-nowrap" th:text="${r.getValue().getName()}"/>
						<td class="text-nowrap">
						<th:block th:each="o, iter : ${r.getValue().getOutputClassStringPretty()}">
							<th:block th:text="${o}"></th:block><th:block th:if="${!iter.last}">, </th:block>
						</th:block>
			    		</td>
						<td class="text-nowrap">
							<th:block th:each="o, iter : ${r.getValue().getOutput()}">
								<th:block th:text="${o.getKey().getName()}"></th:block><th:block th:if="${!iter.last}">, </th:block>
							</th:block>
						</td>
						<td class="text-wrap">
							<th:block th:each="i, iter : ${r.getValue().getIngredients()}">
								<th:block th:text="${i.getKey().getName()}"></th:block><th:block th:if="${!iter.last}">, </th:block>
							</th:block>
						</td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<td class="text-nowrap">-- Nom --</td>
						<td class="text-nowrap">-- Type --</td>
						<td class="text-nowrap">-- Éléments produits --</td>
						<td class="text-wrap">-- Ingrédients --</td>
					</tr>
				</tfoot>
			</table>
		</div>
	</div>
	
	<script>
		$(function() {
			var table = new DataTable("#dt_table", {
				language: { url: "[[@{/js/DataTables/plug-ins/2.3.4/i18n/fr-FR.json}]]" },
				pageLength: 30,
				lengthChange: false,
				scrollX: true,
				initComplete: function () {
					this.api().columns().every(function() { setColumnSearchSelector(this) });
				}
			});
		});
	</script>
</body>
</html>